<!DOCTYPE html>
<html layout:decorate="~{layouts/layout2}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org">

<!-- 사용자 CSS 추가 -->
<th:block layout:fragment="css">
    <style>
    </style>
</th:block>

<div layout:fragment="content">
    <section id="container">
        <div style="padding-top:50px;">
            <div class="wrap">
                <div id="heading">FAQ
                    <div class="txt">가장 많이 찾은 질문과 답변</div>
                </div>
            </div>
        </div>

        <div id="shop">
            <div id="shop_detail" class="tab-area" style="padding-top: 0px;">
                <div class="contbox">
                    <div class="wrap">
                        <div class="product tab-box active">
                            <div class="required">
                                <div class="tit">
                                    <select id="category" name="category" onchange="changeCategory();"
                                            style="width: 100%;height: 50px; appearance: auto">
                                        <option value="">전체</option>
                                        <option value="상품문의">상품문의</option>
                                        <option value="교환/반품">교환/문의</option>
                                        <option value="주문취소/변경">주문취소/변경</option>
                                        <option value="배송 문의">배송 문의</option>
                                        <option value="입금/결제">입금/결제</option>
                                        <option value="기타 문의">기타 문의</option>
                                    </select>
                                </div>
                                <div class="tbl">
                                    <table id="faqTable">
                                        <tr th:each="item: ${list}" >
                                            <td th:attr="data-category=${item.category}" style="width:5%;vertical-align:top;">
                                                <span class="check"></span>•
                                            </td>
                                            <td>
                                               <a th:onclick="|javascript:showContent(${item.id})|" th:text="${item.title}"></a>
                                                <pre th:id="|faq_${item.id}|"
                                                   th:utext="${#strings.replace(item.getContent(), '\r\n', '<br />')}"
                                                   style="font-size: 14px;font-weight: normal;margin-top: 20px;display: table;font-family: inherit;display:none">
                                                </pre>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="application/javascript" th:inline="javascript">
            function showContent(id) {
                const isDisplay = $('#faq_'+ id).is(':visible');
                if (isDisplay) {
                    $('#faq_'+ id).hide();
                } else {
                    $('#faq_'+ id).show().css('display', 'table');
                }
            }

            function changeCategory(){
                const category = $("#category").val();
                if (!category) {
                    $("#faqTable > tbody > tr").show();
                } else {
                    $("#faqTable > tbody > tr").hide();
                    const list = $("#faqTable > tbody > tr > td:first-child[data-category='"+ category +"']");
                    for (let i=0; i<list.length; i++) {
                        $(list[i]).parent().show();
                    }
                }
            }
        </script>
    </section>
</div>
</html>
